<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Goof Starter</title>
    <script type="text/javascript" src="classes/render/draw.js"></script>
    <script type="text/javascript" src="classes/game/board.js"></script>
    <script>

        function main () {

            const canvas = document.getElementById('testCanvas');
            const graphicalContext = canvas.getContext('2d');

            let origin = new Point2D(0,0);

            board = new GameBoard(16, 14, origin);

            let grid_width = board.row_length; // 448 px
            let grid_height = board.column_length; // 512 px

            let tile_size = 32;

            let green_man = board.read_cell(13,15);

            green_man.color = 'red';
            green_man.z_level = 1;

            let green_man2 = board.read_cell(4,4);

            green_man2.color = 'red';
            green_man2.z_level = 1;


            let board_map = board.board_as_priority_map;

            console.log(board_map);

            for (let index = 0; index < 255; index++) {

                if (board_map.has(index)) {

                    let squares = board_map.get(index);

                    for (let square of squares) {

                        let pos = square.make_position(tile_size);
                        graphicalContext.strokeStyle = square.color;
                        graphicalContext.strokeRect(pos.x, pos.y, tile_size, tile_size);

                    }

                }
            }


            // for (let row = 0; row < grid_height; row++) {
            //     let row_no = row * tile_size;
            //     for (let col = 0; col < grid_width; col++) {
            //         let col_val = col * tile_size;
            //         let cell = board.read_cell(row, col);
            //         console.log(row + " " + col);
            //         console.log(cell);
            //         graphicalContext.strokeStyle = cell.color;
            //         graphicalContext.strokeRect(row_no, col_val, tile_size, tile_size);
            //     }
            // }

            /*
            let geometry = [
            new Point2D(100, 50),
            new Point2D(100, 75),
            new Point2D(75, 75)];

            let pos = new Point2D(75,50);

            let poly = new Polygon(pos, geometry);


            graphicalContext.beginPath();

            poly.draw(graphicalContext);

            graphicalContext.closePath();

            graphicalContext.stroke();
            */






        };

    </script>
</head>
<body onload="main()">
    <h1>Doof Doof</h1>
    <canvas  width = "512" height="448" id="testCanvas"  style="border:black 1px solid;">
        Your browser does not support HTML5 Canvas. Please shift to another browser.
    </canvas>
</body>
</html>